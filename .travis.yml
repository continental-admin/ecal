dist: xenial

language: cpp
compiler: gcc

addons:
  apt:
    sources:
      - sourceline: 'deb https://apt.kitware.com/ubuntu/ xenial main'
        key_url: 'https://apt.kitware.com/keys/kitware-archive-latest.asc'
    packages:
      - doxygen
      - graphviz
      - zlib1g-dev
      - qt5-default
      - libhdf5-dev
      - cmake
      - cmake-data
      - libprotobuf-dev
      - libprotoc-dev
      - protobuf-compiler
      - python3.6-dev

script:
  - mkdir _build
  - cd _build
  - /usr/bin/cmake .. -DCMAKE_BUILD_TYPE=Release -DECAL_THIRDPARTY_BUILD_PROTOBUF=OFF -DBUILD_PY_BINDING=ON -DBUILD_SAMPLES=ON
  - make
  - /usr/bin/cpack -G DEB
  - cmake --build . --target create_python_egg --config Release
